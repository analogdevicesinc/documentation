.. _eval-cn0506-fmcz quickstart zed:

ZedBoard Quickstart
===============================================================================

This guide provides some quick instructions (still takes a while to download 
and set things up) on how to setup the :adi:`EVAL-CN0506-FMCZ` on the ZedBoard 
platform.

The ADCs are set to run at full bandwidth mode 3 GSPS, which translates to a 
lane rate of 15.5 Gbps. Each converter has its own SYSREF that is driven from 
a common clock chip HMC7044. Ideally these SYREF lines should be length matched, 
if not the HMC has capability to adjust delays on its outputs. Sampling clocks 
are generated by the same HMC clock chip and should be ideally length matched as 
well.

.. image:: ../images/zedboard-front.jpg
      :align: center
      :width: 500

Design and Integration Files
-------------------------------------------------------------------------------

:dokuwiki:`Schematic, Gerber layout and BOM <resources/eval/user-guides/ad9208_dual_ebz/quickstart/ad9208-dual-ebz.zip>`

Prerequisites
-------------------------------------------------------------------------------
Required Hardware
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

#. `Avnet ZedDoard <https://digilent.com/shop/zedboard-zynq-7000-arm-fpga-soc-development-board/>`__ Rev 1.0 or later
#. :adi:`EVAL-CN0506-FMCZ`
#. 2 x Micro-USB cable
#. Ethernet cable
#. Signal generator
#. 4-way splitter (optional)

Required Software
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

#. A Linux OS on a PC
#. Xilinx Vivado 2019.1 or later
#. UART terminal (e.g TeraTerm)
#. `IIO Scope <https://github.com/analogdevicesinc/iio-oscilloscope/releases/download/v0.13-master/adi-osc-setup.exe/>`__ 

Board Setup
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

.. attention::

    There are two options for powering the board, both require a rework: 

    #. In order to supply the board from the FMC connector populate F1 with a 
    2A fuse.  Use this method if you can ensure the FMC carrier can drive 2A 
    on its 12V power line.   
    #. Use an external 12V power supply and connect it to the TP1 (PWR_IN) and 
    TP2 (AGND) points.


You will need to:

#. Get the `ZedBoard <https://digilent.com/shop/zedboard-zynq-7000-arm-fpga-soc-development-board/>`__
#. Set the Jumpers and Switches accordingly like shown on the picture. (click on 
   the picture to enlarge). 

   .. image:: ../images/zed_sw.png
      :align: center
      :width: 500

   Boot (JP7-JP11) and MIO0 (JP6
   ) jumpers are set to SD card mode.   To use USB peripheral devices with ZedBoard
   , install jumpers JP2 and JP3. The FMC interface spans over two PL I/O banks, 
   banks 34 and 35. To meet the FMC spec, these banks are powered from an 
   adjustable voltage set by jumper, J18. Selectable voltages include 1.8V, 
   default, and 2.5V.
#. Prepare the SD card with the proper Linux image (see :dokuwiki:`here <resources/tools-software/linux-software/zynq_images>`
   and pay attention to the Linux/Windows setup)
#. Insert the SD-CARD into the SD Card Interface Connector (J12)
#. Plug the EVAL-CN0506-FMCZ into the LPC Connector (J1)
#. Plug the Power Supply into 12V Power input connector (J20)
#. Turn on the power switch (SW8) on the FPGA board. Green Power LED (LD13) 
   illuminate. Wait ~ 15 seconds. The blue Done LED (LD12) should illuminate.
#. Follow the instructions for the type of demo that you want to do on screen.

.. note:: 

    For more detailed information on the ZedBoard jumper settings, check out 
    the `ZedBoard Hardware User Guide` available on the `ZedBoard doc page <https://www.avnet.com/americas/products/avnet-boards/avnet-board-families/zedboard>`__,
    the `Jumper Settings` chapter.

Steps
-------------------------------------------------------------------------------

Build the HDL project
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Before building the hdl project setup your computer based on the following 
guide: `Building HDL projects <https://wiki.analog.com/resources/fpga/docs/build>`__.

.. code::

    git clone https://github.com/analogdevicesinc/hdl.git
    git checkout hdl_2019_r2;  // or latest release
    cd hdl/projects/ad9208_dual_ebz/vcu118
    make

.. tip:: 

    Prebuild files for boards with 125MHz VCXO can be downloaded from `here <http://swdownloads.analog.com/cse/prebuilt/vcu118_dual_ad9208_VCXO125_binaries.zip>`__

Build the Linux files
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Instructions on how to build the MicroBlaze Linux kernel and devicetrees from 
source can be found here: 

* `Linux on the MicroBlaze based Xilinx FPGA development Board <https://analogdevicesinc.github.io/documentation/linux/kernel/microblaze.html>`__
* :dokuwiki:`ADI GitHub <https://github.com/analogdevicesinc/linux/blob/main/arch/microblaze/boot/dts/vcu118_dual_ad9208.dts>`

.. code::

    make simpleImahe.vcu119_dual_ad9208

.. tip::

    Prebuild files for boards with 125MHz VCXO can be downloaded from `here <http://swdownloads.analog.com/cse/prebuilt/vcu118_dual_ad9208_VCXO125_binaries.zip>`__


Program the board
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

First we need to prepare a working directory where we will gather all the 
required binary files. From the HDL build directory locate the system_top.bit 
and copy it to the working directory. From the Linux build directory locate the 
simpleImage and copy it to the working directory.

.. code::
    
    mkdir <working_dir>
    cp <hdl_repo_dir>/projects/ad9208_dual_ebz_vcu118.runs/impl_1/system_top.bit <working_dir>
    cp <linux_repo_dir>/arch/microblaze/boot/simpleImage.vcu118_dual_ad9208 <working_dir>

Next step is to program the board with xsct or similar tool. See generic 
instructions for programming the MicroBlaze bases systems here 
`Boot Kernel on FPGA Microblaze <resources/tools-software/linux-drivers/platforms/microblaze#boot_kernel_on_fpga_microblaze>`

.. code::

    xsct% connect
    xsct% fpga -f system_top.bit
    xsct% after 1000
    xsct% target 3
    xsct% dow simpleImage.vcu118_dual_ad9208.strip
    xsct% after 1000
    xsct% con
    xsct% disconnect

.. admonition:: Linux BOOT messages
   :collapsible: closed

   Ramdisk addr 0x00000000,
   Compiled-in FDT at 8041955c
   Linux version 4.14.0-g6f4b7f7 (<HOSTNAME>) (gcc version 8.2.0 (crosstool-NG 1.20.0)) #4 Tue Aug 18 10:15:22 IST 2020
   setup_cpuinfo: initialising
   setup_cpuinfo: Using full CPU PVR support
   wt_msr_noirq
   setup_memory: max_mapnr: 0x30000
   setup_memory: min_low_pfn: 0x80000
   setup_memory: max_low_pfn: 0xb0000
   setup_memory: max_pfn: 0xb0000
   Zone ranges:
   DMA      [mem 0x0000000080000000-0x00000000afffffff]
   Normal   empty
   Movable zone start for each node
   Early memory node ranges
   node   0: [mem 0x0000000080000000-0x00000000ffffefff]
   Initmem setup node 0 [mem 0x0000000080000000-0x00000000ffffefff]
   On node 0 totalpages: 196608
   free_area_init_node: node 0, pgdat 805c5a4c, node_mem_map 808e8000
   DMA zone: 1536 pages used for memmap
   DMA zone: 0 pages reserved
   DMA zone: 196608 pages, LIFO batch:31
   pcpu-alloc: s0 r0 d32768 u32768 alloc=1*32768
   pcpu-alloc: [0] 0
   Built 1 zonelists, mobility grouping on.  Total pages: 195072
   Kernel command line: console=ttyUL0,115200
   PID hash table entries: 4096 (order: 2, 16384 bytes)
   Dentry cache hash table entries: 131072 (order: 7, 524288 bytes)
   Inode-cache hash table entries: 65536 (order: 6, 262144 bytes)
   Memory: 769556K/786432K available (4197K kernel code, 145K rwdata, 1496K rodata, 3074K init, 96K bss, 16876K reserved, 0K cma-reserved)
   Kernel virtual memory layout:
   * 0xffffe000..0xfffff000  : fixmap
   * 0xffffe000..0xffffe000  : early ioremap
   * 0xb0000000..0xffffe000  : vmalloc & ioremap
   NR_IRQS: 64, nr_irqs: 64, preallocated irqs: 0
   irq-xilinx: /amba_pl/interrupt-controller@41200000: num_irq=16, edge=0x35f8
   /amba_pl/timer@41c00000: irq=1
   clocksource: xilinx_clocksource: mask: 0xffffffff max_cycles: 0xffffffff, max_idle_ns: 19112604467 ns
   xilinx_timer_shutdown
   xilinx_timer_set_periodic
   sched_clock: 32 bits at 100MHz, resolution 10ns, wraps every 21474836475ns
   Calibrating delay loop... 49.35 BogoMIPS (lpj=246784)
   pid_max: default: 32768 minimum: 301
   Mount-cache hash table entries: 2048 (order: 1, 8192 bytes)
   Mountpoint-cache hash table entries: 2048 (order: 1, 8192 bytes)
   devtmpfs: initialized
   random: get_random_u32 called from bucket_table_alloc+0x248/0x29c with crng_init=0
   clocksource: jiffies: mask: 0xffffffff max_cycles: 0xffffffff, max_idle_ns: 19112604462750000 ns
   futex hash table entries: 256 (order: -1, 3072 bytes)
   NET: Registered protocol family 16
   clocksource: Switched to clocksource xilinx_clocksource
   NET: Registered protocol family 2
   TCP established hash table entries: 8192 (order: 3, 32768 bytes)
   TCP bind hash table entries: 8192 (order: 3, 32768 bytes)
   TCP: Hash tables configured (established 8192 bind 8192)
   UDP hash table entries: 512 (order: 1, 8192 bytes)
   UDP-Lite hash table entries: 512 (order: 1, 8192 bytes)
   NET: Registered protocol family 1
   RPC: Registered named UNIX socket transport module.
   RPC: Registered udp transport module.
   RPC: Registered tcp transport module.
   RPC: Registered tcp NFSv4.1 backchannel transport module.
   random: fast init done
   Skipping unavailable RESET gpio -2 (reset)
   workingset: timestamp_bits=30 max_order=18 bucket_order=0
   jffs2: version 2.2. (NAND) (SUMMARY)  Â© 2001-2006 Red Hat, Inc.
   Block layer SCSI generic (bsg) driver version 0.4 loaded (major 252)
   io scheduler noop registered
   io scheduler deadline registered
   io scheduler cfq registered (default)
   io scheduler mq-deadline registered
   io scheduler kyber registered
   Serial: 8250/16550 driver, 4 ports, IRQ sharing disabled
   40600000.serial: ttyUL0 at MMIO 0x40600000 (irq = 5, base_baud = 0) is a uartlite
   console [ttyUL0] enabled
   brd: module loaded
   Xilinx SystemACE device driver, major=254
   libphy: Fixed MDIO Bus: probed
   xilinx_axienet 40c00000.ethernet: TX_CSUM 2
   xilinx_axienet 40c00000.ethernet: RX_CSUM 2
   libphy: Xilinx Axi Ethernet MDIO: probed
   i2c /dev entries driver
   i2c i2c-0: Added multiplexed i2c bus 1
   at24 2-0050: 256 byte 24c02 EEPROM, writable, 1 bytes/write
   i2c i2c-0: Added multiplexed i2c bus 2
   i2c i2c-0: Added multiplexed i2c bus 3
   i2c i2c-0: Added multiplexed i2c bus 4
   i2c i2c-0: Added multiplexed i2c bus 5
   i2c i2c-0: Added multiplexed i2c bus 6
   i2c i2c-0: Added multiplexed i2c bus 7
   i2c i2c-0: Added multiplexed i2c bus 8
   pca954x 0-0075: registered 8 multiplexed busses for I2C switch pca9548
   axi_adxcvr 44a60000.axi-adxcvr-rx: AXI-ADXCVR-RX (17.01.a) using GTY4 at 0x44A60000 mapped to 0xb0110000. Number of lanes: 8.
   axi_adxcvr 44b60000.axi-adxcvr-rx: AXI-ADXCVR-RX (17.01.a) using GTY4 at 0x44B60000 mapped to 0xb0330000. Number of lanes: 8.
   NET: Registered protocol family 17
   ad9208 spi0.1: AD9208 PLL LOCKED
   ad9208 spi0.1: Failed to request FastDetect IRQs (-6)
   ad9208 spi0.1: AD9208 DUAL (MASTER with DMA) Rev. 3 Grade 0 (API 1.0.1) probed
   ad9208 spi0.2: AD9208 PLL LOCKED
   ad9208 spi0.2: Failed to request FastDetect IRQs (-6)
   ad9208 spi0.2: AD9208 Rev. 3 Grade 0 (API 1.0.1) probed
   iio_dmaengine_buffer_alloc:227 width 0 (DMA width >= 256-bits ?)
   cf_axi_adc 44a10000.axi-ad9208-0-hpc: ADI AIM (10.01.b) at 0x44A10000 mapped to 0xb0101000, probed ADC AD9208 DUAL (MASTER with DMA) as MASTER
   cf_axi_adc 44b10000.axi-ad9208-1-hpc: ADI AIM (10.01.b) at 0x44B10000 mapped to 0xb010b000, probed ADC AD9208 as MASTER
   Freeing unused kernel memory: 3072K
   This architecture does not have kernel memory protection.
   Starting syslogd: OK
   Starting klogd: OK
   Initializing random number generator... done.
   Starting network: udhcpc: started, v1.29.3
   net eth0: Promiscuous mode disabled.
   net eth0: Promiscuous mode disabled.
   udhcpc: sending discover
   xilinx_axienet 40c00000.ethernet eth0: Link is Down
   udhcpc: sending discover
   xilinx_axienet 40c00000.ethernet eth0: Link is Up - 1Gbps/Full - flow control rx/tx
   udhcpc: sending discover
   udhcpc: sending discover
   udhcpc: sending select for 10.48.65.139
   udhcpc: lease of <IP> obtained, lease time 21600
   deleting routers
   adding dns <IP>
   adding dns <IP>
   Starting dropbear sshd: OK
   Starting IIO Server Daemon

   Welcome to Buildroot
   buildroot login: root
   Password:
   #
   #grep "" /sys/bus/platform/devices/*.axi-jesd*/status*
   /sys/bus/platform/devices/44a90000.axi-jesd204-rx/status:Link is enabled
   /sys/bus/platform/devices/44a90000.axi-jesd204-rx/status:Measured Link Clock: 350.821 MHz
   /sys/bus/platform/devices/44a90000.axi-jesd204-rx/status:Reported Link Clock: 375.000 MHz
   /sys/bus/platform/devices/44a90000.axi-jesd204-rx/status:Lane rate: 15000.000 MHz
   /sys/bus/platform/devices/44a90000.axi-jesd204-rx/status:Lane rate / 40: 375.000 MHz
   /sys/bus/platform/devices/44a90000.axi-jesd204-rx/status:LMFC rate: 46.875 MHz
   /sys/bus/platform/devices/44a90000.axi-jesd204-rx/status:Link status: DATA
   /sys/bus/platform/devices/44a90000.axi-jesd204-rx/status:SYSREF captured: Yes
   /sys/bus/platform/devices/44a90000.axi-jesd204-rx/status:SYSREF alignment error: No
   /sys/bus/platform/devices/44b90000.axi-jesd204-rx/status:Link is enabled
   /sys/bus/platform/devices/44b90000.axi-jesd204-rx/status:Measured Link Clock: 350.821 MHz
   /sys/bus/platform/devices/44b90000.axi-jesd204-rx/status:Reported Link Clock: 375.000 MHz
   /sys/bus/platform/devices/44b90000.axi-jesd204-rx/status:Lane rate: 15000.000 MHz
   /sys/bus/platform/devices/44b90000.axi-jesd204-rx/status:Lane rate / 40: 375.000 MHz
   /sys/bus/platform/devices/44b90000.axi-jesd204-rx/status:LMFC rate: 46.875 MHz
   /sys/bus/platform/devices/44b90000.axi-jesd204-rx/status:Link status: DATA
   /sys/bus/platform/devices/44b90000.axi-jesd204-rx/status:SYSREF captured: Yes
   /sys/bus/platform/devices/44b90000.axi-jesd204-rx/status:SYSREF alignment error: No
   #
   # grep "" /sys/bus/platform/devices/*.axi-jesd*/lane*
   /sys/bus/platform/devices/44a90000.axi-jesd204-rx/lane0_info:Errors: 0
   /sys/bus/platform/devices/44a90000.axi-jesd204-rx/lane0_info:CGS state: DATA
   /sys/bus/platform/devices/44a90000.axi-jesd204-rx/lane0_info:Initial Frame Synchronization: Yes
   /sys/bus/platform/devices/44a90000.axi-jesd204-rx/lane0_info:Lane Latency: 3 Multi-frames and 27 Octets
   /sys/bus/platform/devices/44a90000.axi-jesd204-rx/lane0_info:Initial Lane Alignment Sequence: Yes
   /sys/bus/platform/devices/44a90000.axi-jesd204-rx/lane0_info:DID: 0, BID: 0, LID: 0, L: 8, SCR: 1, F: 1
   /sys/bus/platform/devices/44a90000.axi-jesd204-rx/lane0_info:K: 32, M: 2, N: 16, CS: 0, N': 16, S: 2, HD: 1
   /sys/bus/platform/devices/44a90000.axi-jesd204-rx/lane0_info:FCHK: 0x86, CF: 0
   /sys/bus/platform/devices/44a90000.axi-jesd204-rx/lane0_info:ADJCNT: 0, PHADJ: 0, ADJDIR: 0, JESDV: 1, SUBCLASS: 1
   /sys/bus/platform/devices/44a90000.axi-jesd204-rx/lane0_info:FC: 15000000
   /sys/bus/platform/devices/44a90000.axi-jesd204-rx/lane1_info:Errors: 0
   /sys/bus/platform/devices/44a90000.axi-jesd204-rx/lane1_info:CGS state: DATA
   /sys/bus/platform/devices/44a90000.axi-jesd204-rx/lane1_info:Initial Frame Synchronization: Yes
   /sys/bus/platform/devices/44a90000.axi-jesd204-rx/lane1_info:Lane Latency: 3 Multi-frames and 27 Octets
   /sys/bus/platform/devices/44a90000.axi-jesd204-rx/lane1_info:Initial Lane Alignment Sequence: Yes
   /sys/bus/platform/devices/44a90000.axi-jesd204-rx/lane1_info:DID: 0, BID: 0, LID: 1, L: 8, SCR: 1, F: 1
   /sys/bus/platform/devices/44a90000.axi-jesd204-rx/lane1_info:K: 32, M: 2, N: 16, CS: 0, N': 16, S: 2, HD: 1
   /sys/bus/platform/devices/44a90000.axi-jesd204-rx/lane1_info:FCHK: 0x87, CF: 0
   /sys/bus/platform/devices/44a90000.axi-jesd204-rx/lane1_info:ADJCNT: 0, PHADJ: 0, ADJDIR: 0, JESDV: 1, SUBCLASS: 1
   /sys/bus/platform/devices/44a90000.axi-jesd204-rx/lane1_info:FC: 15000000
   /sys/bus/platform/devices/44a90000.axi-jesd204-rx/lane2_info:Errors: 0
   /sys/bus/platform/devices/44a90000.axi-jesd204-rx/lane2_info:CGS state: DATA
   /sys/bus/platform/devices/44a90000.axi-jesd204-rx/lane2_info:Initial Frame Synchronization: Yes
   /sys/bus/platform/devices/44a90000.axi-jesd204-rx/lane2_info:Lane Latency: 3 Multi-frames and 26 Octets
   /sys/bus/platform/devices/44a90000.axi-jesd204-rx/lane2_info:Initial Lane Alignment Sequence: Yes
   /sys/bus/platform/devices/44a90000.axi-jesd204-rx/lane2_info:DID: 0, BID: 0, LID: 2, L: 8, SCR: 1, F: 1
   /sys/bus/platform/devices/44a90000.axi-jesd204-rx/lane2_info:K: 32, M: 2, N: 16, CS: 0, N': 16, S: 2, HD: 1
   /sys/bus/platform/devices/44a90000.axi-jesd204-rx/lane2_info:FCHK: 0x88, CF: 0
   /sys/bus/platform/devices/44a90000.axi-jesd204-rx/lane2_info:ADJCNT: 0, PHADJ: 0, ADJDIR: 0, JESDV: 1, SUBCLASS: 1
   /sys/bus/platform/devices/44a90000.axi-jesd204-rx/lane2_info:FC: 15000000
   /sys/bus/platform/devices/44a90000.axi-jesd204-rx/lane3_info:Errors: 0
   /sys/bus/platform/devices/44a90000.axi-jesd204-rx/lane3_info:CGS state: DATA
   /sys/bus/platform/devices/44a90000.axi-jesd204-rx/lane3_info:Initial Frame Synchronization: Yes
   /sys/bus/platform/devices/44a90000.axi-jesd204-rx/lane3_info:Lane Latency: 3 Multi-frames and 28 Octets
   /sys/bus/platform/devices/44a90000.axi-jesd204-rx/lane3_info:Initial Lane Alignment Sequence: Yes
   /sys/bus/platform/devices/44a90000.axi-jesd204-rx/lane3_info:DID: 0, BID: 0, LID: 3, L: 8, SCR: 1, F: 1
   /sys/bus/platform/devices/44a90000.axi-jesd204-rx/lane3_info:K: 32, M: 2, N: 16, CS: 0, N': 16, S: 2, HD: 1
   /sys/bus/platform/devices/44a90000.axi-jesd204-rx/lane3_info:FCHK: 0x89, CF: 0
   /sys/bus/platform/devices/44a90000.axi-jesd204-rx/lane3_info:ADJCNT: 0, PHADJ: 0, ADJDIR: 0, JESDV: 1, SUBCLASS: 1
   /sys/bus/platform/devices/44a90000.axi-jesd204-rx/lane3_info:FC: 15000000
   /sys/bus/platform/devices/44a90000.axi-jesd204-rx/lane4_info:Errors: 0
   /sys/bus/platform/devices/44a90000.axi-jesd204-rx/lane4_info:CGS state: DATA
   /sys/bus/platform/devices/44a90000.axi-jesd204-rx/lane4_info:Initial Frame Synchronization: Yes
   /sys/bus/platform/devices/44a90000.axi-jesd204-rx/lane4_info:Lane Latency: 3 Multi-frames and 28 Octets
   /sys/bus/platform/devices/44a90000.axi-jesd204-rx/lane4_info:Initial Lane Alignment Sequence: Yes
   /sys/bus/platform/devices/44a90000.axi-jesd204-rx/lane4_info:DID: 0, BID: 0, LID: 4, L: 8, SCR: 1, F: 1
   /sys/bus/platform/devices/44a90000.axi-jesd204-rx/lane4_info:K: 32, M: 2, N: 16, CS: 0, N': 16, S: 2, HD: 1
   /sys/bus/platform/devices/44a90000.axi-jesd204-rx/lane4_info:FCHK: 0x8A, CF: 0
   /sys/bus/platform/devices/44a90000.axi-jesd204-rx/lane4_info:ADJCNT: 0, PHADJ: 0, ADJDIR: 0, JESDV: 1, SUBCLASS: 1
   /sys/bus/platform/devices/44a90000.axi-jesd204-rx/lane4_info:FC: 15000000
   /sys/bus/platform/devices/44a90000.axi-jesd204-rx/lane5_info:Errors: 0
   /sys/bus/platform/devices/44a90000.axi-jesd204-rx/lane5_info:CGS state: DATA
   /sys/bus/platform/devices/44a90000.axi-jesd204-rx/lane5_info:Initial Frame Synchronization: Yes
   /sys/bus/platform/devices/44a90000.axi-jesd204-rx/lane5_info:Lane Latency: 3 Multi-frames and 24 Octets
   /sys/bus/platform/devices/44a90000.axi-jesd204-rx/lane5_info:Initial Lane Alignment Sequence: Yes
   /sys/bus/platform/devices/44a90000.axi-jesd204-rx/lane5_info:DID: 0, BID: 0, LID: 5, L: 8, SCR: 1, F: 1
   /sys/bus/platform/devices/44a90000.axi-jesd204-rx/lane5_info:K: 32, M: 2, N: 16, CS: 0, N': 16, S: 2, HD: 1
   /sys/bus/platform/devices/44a90000.axi-jesd204-rx/lane5_info:FCHK: 0x8B, CF: 0
   /sys/bus/platform/devices/44a90000.axi-jesd204-rx/lane5_info:ADJCNT: 0, PHADJ: 0, ADJDIR: 0, JESDV: 1, SUBCLASS: 1
   /sys/bus/platform/devices/44a90000.axi-jesd204-rx/lane5_info:FC: 15000000
   /sys/bus/platform/devices/44a90000.axi-jesd204-rx/lane6_info:Errors: 0
   /sys/bus/platform/devices/44a90000.axi-jesd204-rx/lane6_info:CGS state: DATA
   /sys/bus/platform/devices/44a90000.axi-jesd204-rx/lane6_info:Initial Frame Synchronization: Yes
   /sys/bus/platform/devices/44a90000.axi-jesd204-rx/lane6_info:Lane Latency: 3 Multi-frames and 25 Octets
   /sys/bus/platform/devices/44a90000.axi-jesd204-rx/lane6_info:Initial Lane Alignment Sequence: Yes
   /sys/bus/platform/devices/44a90000.axi-jesd204-rx/lane6_info:DID: 0, BID: 0, LID: 6, L: 8, SCR: 1, F: 1
   /sys/bus/platform/devices/44a90000.axi-jesd204-rx/lane6_info:K: 32, M: 2, N: 16, CS: 0, N': 16, S: 2, HD: 1
   /sys/bus/platform/devices/44a90000.axi-jesd204-rx/lane6_info:FCHK: 0x8C, CF: 0
   /sys/bus/platform/devices/44a90000.axi-jesd204-rx/lane6_info:ADJCNT: 0, PHADJ: 0, ADJDIR: 0, JESDV: 1, SUBCLASS: 1
   /sys/bus/platform/devices/44a90000.axi-jesd204-rx/lane6_info:FC: 15000000
   /sys/bus/platform/devices/44a90000.axi-jesd204-rx/lane7_info:Errors: 0
   /sys/bus/platform/devices/44a90000.axi-jesd204-rx/lane7_info:CGS state: DATA
   /sys/bus/platform/devices/44a90000.axi-jesd204-rx/lane7_info:Initial Frame Synchronization: Yes
   /sys/bus/platform/devices/44a90000.axi-jesd204-rx/lane7_info:Lane Latency: 3 Multi-frames and 25 Octets
   /sys/bus/platform/devices/44a90000.axi-jesd204-rx/lane7_info:Initial Lane Alignment Sequence: Yes
   /sys/bus/platform/devices/44a90000.axi-jesd204-rx/lane7_info:DID: 0, BID: 0, LID: 7, L: 8, SCR: 1, F: 1
   /sys/bus/platform/devices/44a90000.axi-jesd204-rx/lane7_info:K: 32, M: 2, N: 16, CS: 0, N': 16, S: 2, HD: 1
   /sys/bus/platform/devices/44a90000.axi-jesd204-rx/lane7_info:FCHK: 0x8D, CF: 0
   /sys/bus/platform/devices/44a90000.axi-jesd204-rx/lane7_info:ADJCNT: 0, PHADJ: 0, ADJDIR: 0, JESDV: 1, SUBCLASS: 1
   /sys/bus/platform/devices/44a90000.axi-jesd204-rx/lane7_info:FC: 15000000
   /sys/bus/platform/devices/44b90000.axi-jesd204-rx/lane0_info:Errors: 0
   /sys/bus/platform/devices/44b90000.axi-jesd204-rx/lane0_info:CGS state: DATA
   /sys/bus/platform/devices/44b90000.axi-jesd204-rx/lane0_info:Initial Frame Synchronization: Yes
   /sys/bus/platform/devices/44b90000.axi-jesd204-rx/lane0_info:Lane Latency: 3 Multi-frames and 26 Octets
   /sys/bus/platform/devices/44b90000.axi-jesd204-rx/lane0_info:Initial Lane Alignment Sequence: Yes
   /sys/bus/platform/devices/44b90000.axi-jesd204-rx/lane0_info:DID: 0, BID: 0, LID: 0, L: 8, SCR: 1, F: 1
   /sys/bus/platform/devices/44b90000.axi-jesd204-rx/lane0_info:K: 32, M: 2, N: 16, CS: 0, N': 16, S: 2, HD: 1
   /sys/bus/platform/devices/44b90000.axi-jesd204-rx/lane0_info:FCHK: 0x86, CF: 0
   /sys/bus/platform/devices/44b90000.axi-jesd204-rx/lane0_info:ADJCNT: 0, PHADJ: 0, ADJDIR: 0, JESDV: 1, SUBCLASS: 1
   /sys/bus/platform/devices/44b90000.axi-jesd204-rx/lane0_info:FC: 15000000
   /sys/bus/platform/devices/44b90000.axi-jesd204-rx/lane1_info:Errors: 0
   /sys/bus/platform/devices/44b90000.axi-jesd204-rx/lane1_info:CGS state: DATA
   /sys/bus/platform/devices/44b90000.axi-jesd204-rx/lane1_info:Initial Frame Synchronization: Yes
   /sys/bus/platform/devices/44b90000.axi-jesd204-rx/lane1_info:Lane Latency: 3 Multi-frames and 28 Octets
   /sys/bus/platform/devices/44b90000.axi-jesd204-rx/lane1_info:Initial Lane Alignment Sequence: Yes
   /sys/bus/platform/devices/44b90000.axi-jesd204-rx/lane1_info:DID: 0, BID: 0, LID: 1, L: 8, SCR: 1, F: 1
   /sys/bus/platform/devices/44b90000.axi-jesd204-rx/lane1_info:K: 32, M: 2, N: 16, CS: 0, N': 16, S: 2, HD: 1
   /sys/bus/platform/devices/44b90000.axi-jesd204-rx/lane1_info:FCHK: 0x87, CF: 0
   /sys/bus/platform/devices/44b90000.axi-jesd204-rx/lane1_info:ADJCNT: 0, PHADJ: 0, ADJDIR: 0, JESDV: 1, SUBCLASS: 1
   /sys/bus/platform/devices/44b90000.axi-jesd204-rx/lane1_info:FC: 15000000
   /sys/bus/platform/devices/44b90000.axi-jesd204-rx/lane2_info:Errors: 0
   /sys/bus/platform/devices/44b90000.axi-jesd204-rx/lane2_info:CGS state: DATA
   /sys/bus/platform/devices/44b90000.axi-jesd204-rx/lane2_info:Initial Frame Synchronization: Yes
   /sys/bus/platform/devices/44b90000.axi-jesd204-rx/lane2_info:Lane Latency: 3 Multi-frames and 26 Octets
   /sys/bus/platform/devices/44b90000.axi-jesd204-rx/lane2_info:Initial Lane Alignment Sequence: Yes
   /sys/bus/platform/devices/44b90000.axi-jesd204-rx/lane2_info:DID: 0, BID: 0, LID: 2, L: 8, SCR: 1, F: 1
   /sys/bus/platform/devices/44b90000.axi-jesd204-rx/lane2_info:K: 32, M: 2, N: 16, CS: 0, N': 16, S: 2, HD: 1
   /sys/bus/platform/devices/44b90000.axi-jesd204-rx/lane2_info:FCHK: 0x88, CF: 0
   /sys/bus/platform/devices/44b90000.axi-jesd204-rx/lane2_info:ADJCNT: 0, PHADJ: 0, ADJDIR: 0, JESDV: 1, SUBCLASS: 1
   /sys/bus/platform/devices/44b90000.axi-jesd204-rx/lane2_info:FC: 15000000
   /sys/bus/platform/devices/44b90000.axi-jesd204-rx/lane3_info:Errors: 0
   /sys/bus/platform/devices/44b90000.axi-jesd204-rx/lane3_info:CGS state: DATA
   /sys/bus/platform/devices/44b90000.axi-jesd204-rx/lane3_info:Initial Frame Synchronization: Yes
   /sys/bus/platform/devices/44b90000.axi-jesd204-rx/lane3_info:Lane Latency: 3 Multi-frames and 27 Octets
   /sys/bus/platform/devices/44b90000.axi-jesd204-rx/lane3_info:Initial Lane Alignment Sequence: Yes
   /sys/bus/platform/devices/44b90000.axi-jesd204-rx/lane3_info:DID: 0, BID: 0, LID: 3, L: 8, SCR: 1, F: 1
   /sys/bus/platform/devices/44b90000.axi-jesd204-rx/lane3_info:K: 32, M: 2, N: 16, CS: 0, N': 16, S: 2, HD: 1
   /sys/bus/platform/devices/44b90000.axi-jesd204-rx/lane3_info:FCHK: 0x89, CF: 0
   /sys/bus/platform/devices/44b90000.axi-jesd204-rx/lane3_info:ADJCNT: 0, PHADJ: 0, ADJDIR: 0, JESDV: 1, SUBCLASS: 1
   /sys/bus/platform/devices/44b90000.axi-jesd204-rx/lane3_info:FC: 15000000
   /sys/bus/platform/devices/44b90000.axi-jesd204-rx/lane4_info:Errors: 0
   /sys/bus/platform/devices/44b90000.axi-jesd204-rx/lane4_info:CGS state: DATA
   /sys/bus/platform/devices/44b90000.axi-jesd204-rx/lane4_info:Initial Frame Synchronization: Yes
   /sys/bus/platform/devices/44b90000.axi-jesd204-rx/lane4_info:Lane Latency: 3 Multi-frames and 26 Octets
   /sys/bus/platform/devices/44b90000.axi-jesd204-rx/lane4_info:Initial Lane Alignment Sequence: Yes
   /sys/bus/platform/devices/44b90000.axi-jesd204-rx/lane4_info:DID: 0, BID: 0, LID: 4, L: 8, SCR: 1, F: 1
   /sys/bus/platform/devices/44b90000.axi-jesd204-rx/lane4_info:K: 32, M: 2, N: 16, CS: 0, N': 16, S: 2, HD: 1
   /sys/bus/platform/devices/44b90000.axi-jesd204-rx/lane4_info:FCHK: 0x8A, CF: 0
   /sys/bus/platform/devices/44b90000.axi-jesd204-rx/lane4_info:ADJCNT: 0, PHADJ: 0, ADJDIR: 0, JESDV: 1, SUBCLASS: 1
   /sys/bus/platform/devices/44b90000.axi-jesd204-rx/lane4_info:FC: 15000000
   /sys/bus/platform/devices/44b90000.axi-jesd204-rx/lane5_info:Errors: 0
   /sys/bus/platform/devices/44b90000.axi-jesd204-rx/lane5_info:CGS state: DATA
   /sys/bus/platform/devices/44b90000.axi-jesd204-rx/lane5_info:Initial Frame Synchronization: Yes
   /sys/bus/platform/devices/44b90000.axi-jesd204-rx/lane5_info:Lane Latency: 3 Multi-frames and 28 Octets
   /sys/bus/platform/devices/44b90000.axi-jesd204-rx/lane5_info:Initial Lane Alignment Sequence: Yes
   /sys/bus/platform/devices/44b90000.axi-jesd204-rx/lane5_info:DID: 0, BID: 0, LID: 5, L: 8, SCR: 1, F: 1
   /sys/bus/platform/devices/44b90000.axi-jesd204-rx/lane5_info:K: 32, M: 2, N: 16, CS: 0, N': 16, S: 2, HD: 1
   /sys/bus/platform/devices/44b90000.axi-jesd204-rx/lane5_info:FCHK: 0x8B, CF: 0
   /sys/bus/platform/devices/44b90000.axi-jesd204-rx/lane5_info:ADJCNT: 0, PHADJ: 0, ADJDIR: 0, JESDV: 1, SUBCLASS: 1
   /sys/bus/platform/devices/44b90000.axi-jesd204-rx/lane5_info:FC: 15000000
   /sys/bus/platform/devices/44b90000.axi-jesd204-rx/lane6_info:Errors: 0
   /sys/bus/platform/devices/44b90000.axi-jesd204-rx/lane6_info:CGS state: DATA
   /sys/bus/platform/devices/44b90000.axi-jesd204-rx/lane6_info:Initial Frame Synchronization: Yes
   /sys/bus/platform/devices/44b90000.axi-jesd204-rx/lane6_info:Lane Latency: 3 Multi-frames and 25 Octets
   /sys/bus/platform/devices/44b90000.axi-jesd204-rx/lane6_info:Initial Lane Alignment Sequence: Yes
   /sys/bus/platform/devices/44b90000.axi-jesd204-rx/lane6_info:DID: 0, BID: 0, LID: 6, L: 8, SCR: 1, F: 1
   /sys/bus/platform/devices/44b90000.axi-jesd204-rx/lane6_info:K: 32, M: 2, N: 16, CS: 0, N': 16, S: 2, HD: 1
   /sys/bus/platform/devices/44b90000.axi-jesd204-rx/lane6_info:FCHK: 0x8C, CF: 0
   /sys/bus/platform/devices/44b90000.axi-jesd204-rx/lane6_info:ADJCNT: 0, PHADJ: 0, ADJDIR: 0, JESDV: 1, SUBCLASS: 1
   /sys/bus/platform/devices/44b90000.axi-jesd204-rx/lane6_info:FC: 15000000
   /sys/bus/platform/devices/44b90000.axi-jesd204-rx/lane7_info:Errors: 0
   /sys/bus/platform/devices/44b90000.axi-jesd204-rx/lane7_info:CGS state: DATA
   /sys/bus/platform/devices/44b90000.axi-jesd204-rx/lane7_info:Initial Frame Synchronization: Yes
   /sys/bus/platform/devices/44b90000.axi-jesd204-rx/lane7_info:Lane Latency: 3 Multi-frames and 27 Octets
   /sys/bus/platform/devices/44b90000.axi-jesd204-rx/lane7_info:Initial Lane Alignment Sequence: Yes
   /sys/bus/platform/devices/44b90000.axi-jesd204-rx/lane7_info:DID: 0, BID: 0, LID: 7, L: 8, SCR: 1, F: 1
   /sys/bus/platform/devices/44b90000.axi-jesd204-rx/lane7_info:K: 32, M: 2, N: 16, CS: 0, N': 16, S: 2, HD: 1
   /sys/bus/platform/devices/44b90000.axi-jesd204-rx/lane7_info:FCHK: 0x8D, CF: 0
   /sys/bus/platform/devices/44b90000.axi-jesd204-rx/lane7_info:ADJCNT: 0, PHADJ: 0, ADJDIR: 0, JESDV: 1, SUBCLASS: 1
   /sys/bus/platform/devices/44b90000.axi-jesd204-rx/lane7_info:FC: 15000000

The following devices should be present:

.. admonition:: Info
   
   This specifies any shell prompt running on the target

.. code:: 

   iio_info | grep iio:device
        iio:device0: hmc7044
        iio:device1: axi-ad9208-0-hpc (buffer capable)
        iio:device2: axi-ad9208-1-hpc
        

Connect to board with IIO Scope
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

From the UART console find out the board IP address that was allocated by the 
DHCP server. If you do not use a DHCP server manually assign an IP to the board 
Ethernet port. 

.. image:: ../images/iio_connect_noip.png
      :align: center
      :width: 500

Capture data with IIO Scope
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

JESD SubClass 0 example
""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""

When the device is configured from device tree into subclass 0 we can observe 
the two links are not synchronized and the channels present phase differences.

.. image:: ../images/subclass0_waves.png
      :align: center
      :width: 500

JESD SubClass 1 example
""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""

When the devices are configured into subclass 1 (default), we can observe the 
JESD links are synchronized and there is no phase difference between the input 
channels.  

.. image:: ../images/subclass1_waves.png
      :align: center
      :width: 500

More Information
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

* `EVAL-CN0506-FMCZ Hardware User Guide <resources/eval/user-guides/circuits-from-the-lab/CN0506>`__
* `CN0506 HDL Development <resources/eval/user-guides/circuits-from-the-lab/CN0506/hdl>`__
